// ZeroCore.dual ver dts
/dts-v1/;
/ {
    #address-cells = <1>;
    #size-cells = <1>;
    chosen {
    	stdout-path = &uart0;
    };
    cpus {
        #address-cells = <1>;
        #size-cells = <0>;
        timebase-frequency = <10000000>;
        CPU0: cpu@0 {
            clocks = <&clk0>;
            device_type = "cpu";
            reg = <0>;
            compatible = "riscv";
            riscv,isa = "rv32ima";
            mmu-type = "riscv,sv32";
            CPU0_intc: interrupt-controller {
				#interrupt-cells = <1>;
				interrupt-controller;
				compatible = "riscv,cpu-intc";
			};
        };

        CPU1: cpu@1 {
            clocks = <&clk0>;
            device_type = "cpu";
            reg = <1>;
            compatible = "riscv";
            riscv,isa = "rv32ima";
            mmu-type = "riscv,sv32";
            CPU1_intc: interrupt-controller {
				#interrupt-cells = <1>;
				interrupt-controller;
				compatible = "riscv,cpu-intc";
			};
        };
    };

    memory@c0000000 {
        device_type = "memory";
        reg = <0x80000000 0x40000000>;
    };

    clocks {
        clk0: osc {
            compatible = "fixed-clock";
            #clock-cells = <0>;
            clock-frequency = <10000000>;
        };
    };

    soc {
        #address-cells = <1>;
        #size-cells = <1>;
        compatible = "simple-bus";
        ranges;

        uart0: uart@10000000 {
            compatible = "xlnx,xps-uartlite-1.00.a", "xlnx,opb-uartlite-1.00.b";
            reg = <0x10000000 0x00020000>;
            interrupt-parent = <&PLIC0>;
            interrupts = <1>;
        };

        clint@2000000 {
            compatible = "sifive,clint0";
            interrupts-extended = < &CPU0_intc 3
                                    &CPU0_intc 7
                                    &CPU1_intc 3
                                    &CPU1_intc 7 >;
            reg = <0x02000000 0x000c0000>;
            clocks = <&clk0>;
        };

        PLIC0: plic@c000000 {
            #interrupt-cells = <1>;
            compatible = "sifive,plic-1.0.0";
            interrupt-controller;
            interrupts-extended = < &CPU0_intc 11
                                    &CPU0_intc 9
                                    &CPU1_intc 11
                                    &CPU1_intc 9 >;
            reg = <0x0c000000 0x04000000>;
            riscv,max-priority = <7>;
            riscv,ndev = <3>;
        };

        xps-spi@20000000 {
            compatible = "xlnx,xps-spi-2.00.b", "xlnx,xps-spi-2.00.a";
            #address-cells = <1>;
            #size-cells = <0>;
            interrupt-parent = <&PLIC0>;
            interrupts = <2>;
            reg = < 0x20000000 0x1000 >;
            fifo-size = <256>;
            xlnx,family = "kintex7";
            xlnx,fifo-exist = <0x1>;
            xlnx,num-ss-bits = <0x1>;
            xlnx,num-transfer-bits = <0x8>;
            xlnx,sck-ratio = <0x10>;

            mmc@0 {
                compatible = "mmc-spi-slot";
                reg = <0>;
                spi-max-frequency = <6250000>;
                voltage-ranges = <3300 3300>;
                disable-wp;
            };
        };

        // spi_controller: spi@20000000 {
        //     #address-cells = <1>;
        //     #size-cells = <0>;
        //     compatible = "xlnx,xps-spi-2.00.a";
        //     reg = <0x20000000 0x10000000>;
        //     interrupt-parent = <&PLIC0>;
        //     interrupts = <2>;
        //     status = "okay";

        //     spi_sd_card: spi_sd@0 {
        //         compatible = "mmc-spi-slot";
        //         reg = <0>;
        //         spi-max-frequency = <20000000>;
        //         voltage-ranges = <3300 3300>;
        //     };
        // };
    };
};
